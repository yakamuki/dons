!function($){function Timepicker(){this.debug=!0,this._curInst=null,this._disabledInputs=[],this._timepickerShowing=!1,this._inDialog=!1,this._dialogClass="ui-timepicker-dialog",this._mainDivId="ui-timepicker-div",this._inlineClass="ui-timepicker-inline",this._currentClass="ui-timepicker-current",this._dayOverClass="ui-timepicker-days-cell-over",this.regional=[],this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"},this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,showNowButton:!1,showDeselectButton:!1,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}},$.extend(this._defaults,this.regional[""]),this.tpDiv=$('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function extendRemove(e,t){$.extend(e,t);for(var i in t)null!=t[i]&&void 0!=t[i]||(e[i]=t[i]);return e}$.extend($.ui,{timepicker:{version:"0.3.3"}});var PROP_NAME="timepicker",tpuuid=(new Date).getTime();$.extend(Timepicker.prototype,{markerClassName:"hasTimepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachTimepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("time:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="tp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?(this._connectTimepicker(target,inst),this._setTimeFromField(inst)):inline&&this._inlineTimepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,inline:t,tpDiv:t?$('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.timepicker",function(e,i,n){t.settings[i]=n}).bind("getData.timepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t))},_doKeyDown:function(e){var t=$.timepicker._getInst(e.target),i=!0;if(t._keyEvent=!0,$.timepicker._timepickerShowing)switch(e.keyCode){case 9:$.timepicker._hideTimepicker(),i=!1;break;case 13:return $.timepicker._updateSelectedValue(t),$.timepicker._hideTimepicker(),!1;case 27:$.timepicker._hideTimepicker();break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.timepicker._showTimepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyUp:function(e){var t=$.timepicker._getInst(e.target);$.timepicker._setTimeFromField(t),$.timepicker._updateTimepicker(t)},_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus.timepicker",this._showTimepicker),e.unbind("click.timepicker",this._adjustZIndex),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if("focus"!=s&&"both"!=s||(e.bind("focus.timepicker",this._showTimepicker),e.bind("click.timepicker",this._adjustZIndex)),"button"==s||"both"==s){var r=this._get(t,"button");null==r&&(r=$('<button class="ui-timepicker-trigger" type="button">...</button>'),e.after(r)),$(r).bind("click.timepicker",function(){return $.timepicker._timepickerShowing&&$.timepicker._lastInput==e[0]?$.timepicker._hideTimepicker():t.input.is(":disabled")||$.timepicker._showTimepicker(e[0]),!1})}},_inlineTimepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.tpDiv).bind("setData.timepicker",function(e,i,n){t.settings[i]=n}).bind("getData.timepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setTimeFromField(t),this._updateTimepicker(t),t.tpDiv.show())},_adjustZIndex:function(e){e=e.target||e;var t=$.timepicker._getInst(e);t.tpDiv.css("zIndex",$.timepicker._getZIndex(e)+1)},_showTimepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.timepicker._isDisabledTimepicker(e)&&$.timepicker._lastInput!=e){$.timepicker._hideTimepicker();var t=$.timepicker._getInst(e);$.timepicker._curInst&&$.timepicker._curInst!=t&&$.timepicker._curInst.tpDiv.stop(!0,!0);var i=$.timepicker._get(t,"beforeShow");extendRemove(t.settings,i?i.apply(e,[e,t]):{}),t.lastVal=null,$.timepicker._lastInput=e,$.timepicker._setTimeFromField(t),$.timepicker._inDialog&&(e.value=""),$.timepicker._pos||($.timepicker._pos=$.timepicker._findPos(e),$.timepicker._pos[1]+=e.offsetHeight);var n=!1;$(e).parents().each(function(){return n|="fixed"==$(this).css("position"),!n});var s={left:$.timepicker._pos[0],top:$.timepicker._pos[1]};if($.timepicker._pos=null,t.tpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.timepicker._updateTimepicker(t),!t.inline&&"object"==typeof $.ui.position){t.tpDiv.position({of:t.input,my:$.timepicker._get(t,"myPosition"),at:$.timepicker._get(t,"atPosition"),collision:"flip"});var s=t.tpDiv.offset();$.timepicker._pos=[s.top,s.left]}if(t._hoursClicked=!1,t._minutesClicked=!1,s=$.timepicker._checkOffset(t,s,n),t.tpDiv.css({position:$.timepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var r=$.timepicker._get(t,"showAnim"),a=$.timepicker._get(t,"duration"),o=function(){$.timepicker._timepickerShowing=!0;var e=$.timepicker._getBorders(t.tpDiv);t.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:t.tpDiv.outerWidth(),height:t.tpDiv.outerHeight()})};$.timepicker._adjustZIndex(e),$.effects&&$.effects[r]?t.tpDiv.show(r,$.timepicker._get(t,"showOptions"),a,o):t.tpDiv.show(r?a:null,o),r&&a||o(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.timepicker._curInst=t}}},_getZIndex:function(e){for(var t,i,n=$(e),s=0;n.length&&n[0]!==document;)t=n.css("position"),"absolute"!==t&&"relative"!==t&&"fixed"!==t||(i=parseInt(n.css("zIndex"),10),isNaN(i)||0===i||i>s&&(s=i)),n=n.parent();return s},_refreshTimepicker:function(e){var t=this._getInst(e);t&&this._updateTimepicker(t)},_updateTimepicker:function(e){e.tpDiv.empty().append(this._generateHTML(e)),this._rebindDialogEvents(e)},_rebindDialogEvents:function(e){var t=$.timepicker._getBorders(e.tpDiv),i=this;e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-t[0],top:-t[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},$.proxy($.timepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},$.proxy($.timepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&$(this).removeClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&$(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){i._isDisabledTimepicker(e.inline?e.tpDiv.parent()[0]:e.input[0])||($(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-timepicker-prev")!=-1&&$(this).addClass("ui-timepicker-prev-hover"),this.className.indexOf("ui-timepicker-next")!=-1&&$(this).addClass("ui-timepicker-next-hover"))}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(e){$.timepicker.selectNow(e)}).end().find(".ui-timepicker-deselect").bind("click",function(e){$.timepicker.deselectTime(e)}).end().find(".ui-timepicker-close").bind("click",function(e){$.timepicker._hideTimepicker()}).end()},_generateHTML:function(e){var t,i,n,s,r=1==this._get(e,"showPeriod"),a=1==this._get(e,"showPeriodLabels"),o=1==this._get(e,"showLeadingZero"),u=1==this._get(e,"showHours"),c=1==this._get(e,"showMinutes"),d=this._get(e,"amPmText"),p=this._get(e,"rows"),l=0,m=0,h=0,f=0,g=0,k=0,_=Array(),v=this._get(e,"hours"),$=null,y=0,b=this._get(e,"hourText"),w=this._get(e,"showCloseButton"),T=this._get(e,"closeButtonText"),D=this._get(e,"showNowButton"),C=this._get(e,"nowButtonText"),x=this._get(e,"showDeselectButton"),I=this._get(e,"deselectButtonText"),N=w||D||x;for(t=v.starts;t<=v.ends;t++)_.push(t);if($=Math.ceil(_.length/p),a){for(y=0;y<_.length;y++)_[y]<12?h++:f++;y=0,l=Math.floor(h/_.length*p),m=Math.floor(f/_.length*p),p!=l+m&&(h&&(!f||!l||m&&h/l>=f/m)?l++:m++),g=Math.min(l,1),k=l+1,$=0==l?Math.ceil(f/m):0==m?Math.ceil(h/l):Math.ceil(Math.max(h/l,f/m))}if(s='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>',u){for(s+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+b+'</div><table class="ui-timepicker">',i=1;i<=p;i++){for(s+="<tr>",i==g&&a&&(s+='<th rowspan="'+l.toString()+'" class="periods" scope="row">'+d[0]+"</th>"),i==k&&a&&(s+='<th rowspan="'+m.toString()+'" class="periods" scope="row">'+d[1]+"</th>"),n=1;n<=$;n++)a&&i<k&&_[y]>=12?s+=this._generateHTMLHourCell(e,void 0,r,o):(s+=this._generateHTMLHourCell(e,_[y],r,o),y++);s+="</tr>"}s+="</table></td>"}if(c&&(s+='<td class="ui-timepicker-minutes">',s+=this._generateHTMLMinutes(e),s+="</td>"),s+="</tr>",N){var M='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">';D&&(M+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+C+"</button>"),x&&(M+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+I+"</button>"),w&&(M+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" >'+T+"</button>"),s+=M+"</div></td></tr>"}return s+="</table>"},_updateMinuteDisplay:function(e){var t=this._generateHTMLMinutes(e);e.tpDiv.find("td.ui-timepicker-minutes").html(t),this._rebindDialogEvents(e)},_generateHTMLMinutes:function(e){var t,n,s="",r=this._get(e,"rows"),a=Array(),o=this._get(e,"minutes"),u=null,c=0,d=1==this._get(e,"showMinutesLeadingZero"),p=this._get(e,"onMinuteShow"),l=this._get(e,"minuteText");for(o.starts||(o.starts=0),o.ends||(o.ends=59),o.manual||(o.manual=[]),t=o.starts;t<=o.ends;t+=o.interval)a.push(t);for(i=0;i<o.manual.length;i++){var m=o.manual[i];"number"!=typeof m||m<0||m>59||$.inArray(m,a)>=0||a.push(m)}if(a.sort(function(e,t){return e-t}),u=Math.round(a.length/r+.49),p&&0==p.apply(e.input?e.input[0]:null,[e.hours,e.minutes]))for(c=0;c<a.length;c+=1)if(t=a[c],p.apply(e.input?e.input[0]:null,[e.hours,t])){e.minutes=t;break}for(s+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+l+'</div><table class="ui-timepicker">',c=0,n=1;n<=r;n++){for(s+="<tr>";c<n*u;){var t=a[c],h="";void 0!==t&&(h=t<10&&d?"0"+t.toString():t.toString()),s+=this._generateHTMLMinuteCell(e,t,h),c++}s+="</tr>"}return s+="</table>"},_generateHTMLHourCell:function(e,t,i,n){var s=t;t>12&&i&&(s=t-12),0==s&&i&&(s=12),s<10&&n&&(s="0"+s);var r="",a=!0,o=this._get(e,"onHourShow"),u=this._get(e,"maxTime"),c=this._get(e,"minTime");return void 0==t?r='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(o&&(a=o.apply(e.input?e.input[0]:null,[t])),a&&(!isNaN(parseInt(u.hour))&&t>u.hour&&(a=!1),!isNaN(parseInt(c.hour))&&t<c.hour&&(a=!1)),r=a?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-hour="'+t.toString()+'"><a class="ui-state-default '+(t==e.hours?"ui-state-active":"")+'">'+s.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(t==e.hours?" ui-state-active ":" ")+'">'+s.toString()+"</span></td>")},_generateHTMLMinuteCell:function(e,t,i){var n="",s=!0,r=e.hours,a=this._get(e,"onMinuteShow"),o=this._get(e,"maxTime"),u=this._get(e,"minTime");return a&&(s=a.apply(e.input?e.input[0]:null,[e.hours,t])),void 0==t?n='<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>':(s&&null!==r&&(!isNaN(parseInt(o.hour))&&!isNaN(parseInt(o.minute))&&r>=o.hour&&t>o.minute&&(s=!1),!isNaN(parseInt(u.hour))&&!isNaN(parseInt(u.minute))&&r<=u.hour&&t<u.minute&&(s=!1)),n=s?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+e.id.replace(/\\\\/g,"\\")+'" data-minute="'+t.toString()+'" ><a class="ui-state-default '+(t==e.minutes?"ui-state-active":"")+'" >'+i+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+i+"</span></td>")},_destroyTimepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==n?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus.timepicker",this._showTimepicker).unbind("click.timepicker",this._adjustZIndex)):"div"!=n&&"span"!=n||t.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(e){var t=$(e),i=t.attr("id"),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();if("input"==s){e.disabled=!1;var r=this._get(n,"button");$(r).removeClass("ui-state-disabled").disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end()}else if("div"==s||"span"==s){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("button").each(function(){this.disabled=!1})}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==i?null:e})}},_disableTimepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var n=e.nodeName.toLowerCase();if("input"==n){var s=this._get(i,"button");$(s).addClass("ui-state-disabled").disabled=!0,e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end()}else if("div"==n||"span"==n){var r=t.children("."+this._inlineClass);r.children().addClass("ui-state-disabled"),r.find("button").each(function(){this.disabled=!0})}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=t.attr("id")}},_isDisabledTimepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_checkOffset:function(e,t,i){var n=e.tpDiv.outerWidth(),s=e.tpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+$(document).scrollLeft(),u=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>o&&o>n?Math.abs(t.left+n-o):0),t.top-=Math.min(t.top,t.top+s>u&&u>s?Math.abs(s+a):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType);)e=e[i?"previousSibling":"nextSibling"];var n=$(e).offset();return[n.left,n.top]},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkExternalClick:function(e){if($.timepicker._curInst){var t=$(e.target);t[0].id==$.timepicker._mainDivId||0!=t.parents("#"+$.timepicker._mainDivId).length||t.hasClass($.timepicker.markerClassName)||t.hasClass($.timepicker._triggerClass)||!$.timepicker._timepickerShowing||$.timepicker._inDialog&&$.blockUI||$.timepicker._hideTimepicker()}},_hideTimepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._timepickerShowing){var i=this._get(t,"showAnim"),n=this._get(t,"duration"),s=function(){$.timepicker._tidyDialog(t),this._curInst=null};$.effects&&$.effects[i]?t.tpDiv.hide(i,$.timepicker._get(t,"showOptions"),n,s):t.tpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?n:null,s),i||s(),this._timepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.tpDiv))),this._inDialog=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t])}},_tidyDialog:function(e){e.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this timepicker"}},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setTimeFromField:function(e){if(e.input.val()!=e.lastVal){var t=this._get(e,"defaultTime"),i="now"==t?this._getCurrentTimeRounded(e):t;if(0==e.inline&&""!=e.input.val()&&(i=e.input.val()),i instanceof Date)e.hours=i.getHours(),e.minutes=i.getMinutes();else{var n=e.lastVal=i;if(""==i)e.hours=-1,e.minutes=-1;else{var s=this.parseTime(e,n);e.hours=s.hours,e.minutes=s.minutes}}$.timepicker._updateTimepicker(e)}},_optionTimepicker:function(e,t,i){var n=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.timepicker._defaults):n?"all"==t?$.extend({},n.settings):this._get(n,t):null;var s=t||{};"string"==typeof t&&(s={},s[t]=i),n&&(extendRemove(n.settings,s),this._curInst==n&&(this._hideTimepicker(),this._updateTimepicker(n)),n.inline&&this._updateTimepicker(n))},_setTimeTimepicker:function(e,t){var i=this._getInst(e);i&&(this._setTime(i,t),this._updateTimepicker(i),this._updateAlternate(i,t))},_setTime:function(e,t,i){var n=e.hours,s=e.minutes;if(t instanceof Date)e.hours=t.getHours(),e.minutes=t.getMinutes();else{var t=this.parseTime(e,t);e.hours=t.hours,e.minutes=t.minutes}n==e.hours&&s==e.minutes||i||e.input.trigger("change"),this._updateTimepicker(e),this._updateSelectedValue(e)},_getCurrentTimeRounded:function(e){var t=new Date,i=t.getMinutes(),n=this._get(e,"minutes"),s=Math.round(i/n.interval)*n.interval;return t.setMinutes(s),t},parseTime:function(e,t){var i=new Object;if(i.hours=-1,i.minutes=-1,!t)return"";var n=this._get(e,"timeSeparator"),s=this._get(e,"amPmText"),r=this._get(e,"showHours"),a=this._get(e,"showMinutes"),o=this._get(e,"optionalMinutes"),u=1==this._get(e,"showPeriod"),c=t.indexOf(n);if(c!=-1?(i.hours=parseInt(t.substr(0,c),10),i.minutes=parseInt(t.substr(c+1),10)):!r||a&&!o?!r&&a&&(i.minutes=parseInt(t,10)):i.hours=parseInt(t,10),r){var d=t.toUpperCase();i.hours<12&&u&&d.indexOf(s[1].toUpperCase())!=-1&&(i.hours+=12),12==i.hours&&u&&d.indexOf(s[0].toUpperCase())!=-1&&(i.hours=0)}return i},selectNow:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),i=$(t),n=this._getInst(i[0]),s=new Date;n.hours=s.getHours(),n.minutes=s.getMinutes(),this._updateSelectedValue(n),this._updateTimepicker(n),this._hideTimepicker()},deselectTime:function(e){var t=$(e.target).attr("data-timepicker-instance-id"),i=$(t),n=this._getInst(i[0]);n.hours=-1,n.minutes=-1,this._updateSelectedValue(n),this._hideTimepicker()},selectHours:function(e){var t=$(e.currentTarget),i=t.attr("data-timepicker-instance-id"),n=parseInt(t.attr("data-hour")),s=e.data.fromDoubleClick,r=$(i),a=this._getInst(r[0]),o=1==this._get(a,"showMinutes");if($.timepicker._isDisabledTimepicker(r.attr("id")))return!1;t.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active"),t.children("a").addClass("ui-state-active"),a.hours=n;var u=this._get(a,"onMinuteShow"),c=this._get(a,"maxTime"),d=this._get(a,"minTime");return!u&&isNaN(parseInt(c.minute))&&isNaN(parseInt(d.minute))||this._updateMinuteDisplay(a),this._updateSelectedValue(a),a._hoursClicked=!0,(a._minutesClicked||s||0==o)&&$.timepicker._hideTimepicker(),!1},selectMinutes:function(e){var t=$(e.currentTarget),i=t.attr("data-timepicker-instance-id"),n=parseInt(t.attr("data-minute")),s=e.data.fromDoubleClick,r=$(i),a=this._getInst(r[0]),o=1==this._get(a,"showHours");return!$.timepicker._isDisabledTimepicker(r.attr("id"))&&(t.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active"),t.children("a").addClass("ui-state-active"),a.minutes=n,this._updateSelectedValue(a),a._minutesClicked=!0,!(!a._hoursClicked&&!s&&0!=o)&&($.timepicker._hideTimepicker(),!1))},_updateSelectedValue:function(e){var t=this._getParsedTime(e);e.input&&(e.input.val(t),e.input.trigger("change"));var i=this._get(e,"onSelect");return i&&i.apply(e.input?e.input[0]:null,[t,e]),this._updateAlternate(e,t),t},_getParsedTime:function(e){if(e.hours==-1&&e.minutes==-1)return"";(e.hours<e.hours.starts||e.hours>e.hours.ends)&&(e.hours=0),(e.minutes<e.minutes.starts||e.minutes>e.minutes.ends)&&(e.minutes=0);var t="",i=1==this._get(e,"showPeriod"),n=1==this._get(e,"showLeadingZero"),s=1==this._get(e,"showHours"),r=1==this._get(e,"showMinutes"),a=1==this._get(e,"optionalMinutes"),o=this._get(e,"amPmText"),u=e.hours?e.hours:0,c=e.minutes?e.minutes:0,d=u?u:0,p="";d==-1&&(d=0),c==-1&&(c=0),i&&(0==e.hours&&(d=12),e.hours<12?t=o[0]:(t=o[1],d>12&&(d-=12)));var l=d.toString();n&&d<10&&(l="0"+l);var m=c.toString();return c<10&&(m="0"+m),s&&(p+=l),!s||!r||a&&0==m||(p+=this._get(e,"timeSeparator")),!r||a&&0==m||(p+=m),s&&t.length>0&&(p+=this._get(e,"periodSeparator")+t),p},_updateAlternate:function(e,t){var i=this._get(e,"altField");i&&$(i).each(function(e,i){$(i).val(t)})},_getTimeAsDateTimepicker:function(e){var t=this._getInst(e);return t.hours==-1&&t.minutes==-1?"":((t.hours<t.hours.starts||t.hours>t.hours.ends)&&(t.hours=0),(t.minutes<t.minutes.starts||t.minutes>t.minutes.ends)&&(t.minutes=0),new Date(0,0,0,t.hours,t.minutes,0))},_getTimeTimepicker:function(e){var t=this._getInst(e);return this._getParsedTime(t)},_getHourTimepicker:function(e){var t=this._getInst(e);return void 0==t?-1:t.hours},_getMinuteTimepicker:function(e){var t=this._getInst(e);return void 0==t?-1:t.minutes}}),$.fn.timepicker=function(e){$.timepicker.initialized||($(document).mousedown($.timepicker._checkExternalClick),$.timepicker.initialized=!0),0===$("#"+$.timepicker._mainDivId).length&&$("body").append($.timepicker.tpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"getTime"!=e&&"getTimeAsDate"!=e&&"getHour"!=e&&"getMinute"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this].concat(t)):$.timepicker._attachTimepicker(this,e)}):$.timepicker["_"+e+"Timepicker"].apply($.timepicker,[this[0]].concat(t))},$.timepicker=new Timepicker,$.timepicker.initialized=!1,$.timepicker.uuid=(new Date).getTime(),$.timepicker.version="0.3.3",window["TP_jQuery_"+tpuuid]=$}(jQuery),function(e){e.fn.opExtendedSettings=function(){return this.each(function(){var t=e(this),i=t.find(".settings-container"),n=t.find(".collapse-toggle"),s=i.hasClass("hidden");n.click(function(){s=!s,s?(i.addClass("hidden"),n.html(openingHoursData.translations.moreSettings)):(i.removeClass("hidden"),n.html(openingHoursData.translations.fewerSettings))})})},e(document).ready(function(){e(".extended-settings").opExtendedSettings(),e(document).on("widget-updated widget-added",function(t,i){e(i).find(".extended-settings").opExtendedSettings()})})}(jQuery),jQuery.fn.opHolidays=function(){function e(){n.find("tr.op-holiday").each(function(e,t){jQuery(t).opSingleHoliday()})}function t(){var e={action:"op_render_single_dummy_holiday"};jQuery.post(ajax_object.ajax_url,e,function(e){var t=jQuery(e).clone();t.opSingleHoliday(),n.append(t)})}var i=jQuery(this),n=i.find("tbody"),s=i.find(".add-holiday");e(),s.click(function(e){e.preventDefault(),t()})},jQuery.fn.opSingleHoliday=function(){function e(){t.remove()}var t=jQuery(this);if(t.length>1)return void t.each(function(e,t){jQuery(t).opSingleHoliday()});var i=t.find(".remove-holiday"),n=t.find("input.date-start"),s=t.find("input.date-end");i.click(function(t){t.preventDefault(),e()}),n.datepicker({dateFormat:"yy-mm-dd",firstDay:openingHoursData.startOfWeek||0,dayNames:openingHoursData.weekdays.full,dayNamesMin:openingHoursData.weekdays["short"],dayNamesShort:openingHoursData.weekdays["short"],onClose:function(e){s.datepicker("option","minDate",e)}}),s.datepicker({dateFormat:"yy-mm-dd",firstDay:openingHoursData.startOfWeek||0,dayNames:openingHoursData.weekdays.full,dayNamesMin:openingHoursData.weekdays["short"],dayNamesShort:openingHoursData.weekdays["short"],onClose:function(e){n.datepicker("option","maxDate",e)}}),n.focus(function(){n.blur()}),s.focus(function(){s.blur()})},jQuery(document).ready(function(){jQuery("#op-holidays-wrap").opHolidays()}),jQuery.fn.opIOs=function(){function e(){n.find("tr.op-irregular-opening").each(function(e,t){jQuery(t).opSingleIO()})}function t(){var e={action:"op_render_single_dummy_irregular_opening"};jQuery.post(ajax_object.ajax_url,e,function(e){var t=jQuery(e).clone();t.opSingleIO(),n.append(t)})}var i=jQuery(this),n=i.find("tbody"),s=jQuery(i.find(".add-io"));e(),s.click(function(e){e.preventDefault(),t()})},jQuery.fn.opSingleIO=function(){function e(){t.remove()}var t=jQuery(this);if(t.length>1)return void t.each(function(e,t){jQuery(t).opSingleIO()});var i=t.find(".remove-io"),n=t.find("input.date"),s=t.find("input.input-timepicker");s.timepicker({hourText:translations.tp_hour,minuteText:translations.tp_minute}),s.focus(function(){s.blur()}),n.datepicker({dateFormat:"yy-mm-dd",firstDay:openingHoursData.startOfWeek||0,dayNames:openingHoursData.weekdays.full,dayNamesMin:openingHoursData.weekdays["short"],dayNamesShort:openingHoursData.weekdays["short"]}),n.focus(function(){n.blur()}),i.click(function(t){t.preventDefault(),e()})},jQuery(document).ready(function(){jQuery("#op-irregular-openings-wrap").opIOs()}),function(e){e(document).ready(function(){var t=e(".op-criteria-date-start"),i=e(".op-criteria-date-end");t.addClass("input-gray"),i.addClass("input-gray"),t.datepicker({dateFormat:"yy-mm-dd",firstDay:openingHoursData.startOfWeek||0,dayNames:openingHoursData.weekdays.full,dayNamesMin:openingHoursData.weekdays["short"],dayNamesShort:openingHoursData.weekdays["short"],onClose:function(e){i.datepicker("option","minDate",e)}}),i.datepicker({dateFormat:"yy-mm-dd",firstDay:openingHoursData.startOfWeek||0,dayNames:openingHoursData.weekdays.full,dayNamesMin:openingHoursData.weekdays["short"],dayNamesShort:openingHoursData.weekdays["short"],onClose:function(e){t.datepicker("option","maxDate",e)}}),t.focus(function(){t.blur()}),i.focus(function(){i.blur()}),e("#op-set-detail-child-set-notice").parents(".field").hide()})}(jQuery),function(e){e.fn.opPeriodsDay=function(){return this.each(function(t,i){function n(){var t={action:"op_render_single_period",weekday:r.attr("data-day"),set:r.attr("data-set")};e.post(ajax_object.ajax_url,t,function(t){var i=e(t).clone();i.opSinglePeriod(),a.append(i)})}var s=e(i),r=s.find(".period-container"),a=r.find("tbody"),o=s.find("a.add-period");o.click(function(){n()})})},e.fn.opSinglePeriod=function(){return this.each(function(t,i){var n=e(i),s=n.find(".delete-period"),r=n.find(".input-timepicker");s.click(function(){n.remove()}),r.timepicker({hourText:translations.tp_hour,minuteText:translations.tp_minute}),r.focus(function(){r.blur()})})},e(document).ready(function(){var t=e(".form-opening-hours");t.find("tr.periods-day").opPeriodsDay(),t.find("tr.period").opSinglePeriod()})}(jQuery);
//# sourceMappingURL=main.js.map
